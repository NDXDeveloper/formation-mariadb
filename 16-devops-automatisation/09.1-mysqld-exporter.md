üîù Retour au [Sommaire](/SOMMAIRE.md)

# 16.9.1 mysqld_exporter - Exposition des m√©triques MariaDB pour Prometheus

> **Niveau** : Avanc√© √† Expert  
> **Dur√©e estim√©e** : 3-4 heures  
> **Pr√©requis** : Prometheus basics, Kubernetes, MariaDB administration, PromQL

## üéØ Objectifs d'apprentissage

√Ä l'issue de cette section, vous serez capable de :
- Installer et configurer mysqld_exporter pour exposer les m√©triques MariaDB
- Comprendre les m√©triques essentielles pour le monitoring MariaDB en production
- Int√©grer mysqld_exporter avec Prometheus et Prometheus Operator
- D√©ployer mysqld_exporter dans Kubernetes avec ServiceMonitor
- Cr√©er des requ√™tes PromQL avanc√©es pour analyser les performances MariaDB
- Configurer des collectors personnalis√©s pour m√©triques sp√©cifiques
- Monitorer la r√©plication, les connexions, et les performances InnoDB
- Impl√©menter des strat√©gies de scraping optimis√©es pour haute disponibilit√©
- Troubleshooter les probl√®mes courants d'exposition de m√©triques

---

## Introduction

**mysqld_exporter** est l'exporteur officiel Prometheus pour MySQL/MariaDB. Il se connecte √† MariaDB via le protocole client standard et expose des m√©triques au format Prometheus sur un endpoint HTTP.

### Pourquoi mysqld_exporter ?

| Avantage | Description |
|----------|-------------|
| **Standard Prometheus** | Format de m√©triques natif Prometheus |
| **L√©ger** | Faible overhead, √©crit en Go |
| **Complet** | 200+ m√©triques out-of-the-box |
| **Extensible** | Custom queries via collectors |
| **Production-ready** | Utilis√© par Google, GitHub, Shopify... |
| **Multi-instances** | Support Galera, R√©plication, Sharding |
| **Haute disponibilit√©** | Compatible avec Prometheus federation |

### Architecture de monitoring

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Monitoring Architecture                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                              ‚îÇ
‚îÇ  MariaDB Instances                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ Primary      ‚îÇ  ‚îÇ Replica 1    ‚îÇ  ‚îÇ Replica 2    ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ :3306        ‚îÇ  ‚îÇ :3306        ‚îÇ  ‚îÇ :3306        ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ                 ‚îÇ                ‚îÇ
‚îÇ         ‚îÇ TCP             ‚îÇ                 ‚îÇ                ‚îÇ
‚îÇ         ‚ñº                 ‚ñº                 ‚ñº                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ mysqld_      ‚îÇ  ‚îÇ mysqld_      ‚îÇ  ‚îÇ mysqld_      ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ exporter     ‚îÇ  ‚îÇ exporter     ‚îÇ  ‚îÇ exporter     ‚îÇ        ‚îÇ
‚îÇ  ‚îÇ :9104        ‚îÇ  ‚îÇ :9104        ‚îÇ  ‚îÇ :9104        ‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ         ‚îÇ                 ‚îÇ                 ‚îÇ                ‚îÇ
‚îÇ         ‚îÇ HTTP/metrics    ‚îÇ                 ‚îÇ                ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ                           ‚îÇ                                  ‚îÇ
‚îÇ                           ‚ñº                                  ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ                  ‚îÇ   Prometheus     ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ   :9090          ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ Scrape     ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ Config     ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ TSDB       ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îÇ                           ‚îÇ                                  ‚îÇ
‚îÇ                           ‚îÇ PromQL                           ‚îÇ
‚îÇ                           ‚ñº                                  ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ                  ‚îÇ   Grafana        ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ   :3000          ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îÇ Dashboards ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                        ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îÇ                           ‚îÇ                                  ‚îÇ
‚îÇ                           ‚ñº                                  ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ                  ‚îÇ   Alertmanager   ‚îÇ                        ‚îÇ
‚îÇ                  ‚îÇ   :9093          ‚îÇ                        ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
‚îÇ                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Installation et configuration

### 1. Installation sur serveur Linux

**Binaire pr√©compil√© (recommand√©) :**
```bash
# T√©l√©charger la derni√®re version
EXPORTER_VERSION="0.15.1"
wget https://github.com/prometheus/mysqld_exporter/releases/download/v${EXPORTER_VERSION}/mysqld_exporter-${EXPORTER_VERSION}.linux-amd64.tar.gz

# Extraire
tar xvf mysqld_exporter-${EXPORTER_VERSION}.linux-amd64.tar.gz
cd mysqld_exporter-${EXPORTER_VERSION}.linux-amd64

# Installer
sudo mv mysqld_exporter /usr/local/bin/
sudo chmod +x /usr/local/bin/mysqld_exporter

# V√©rifier
mysqld_exporter --version
# mysqld_exporter, version 0.15.1
```

**Via package manager (Debian/Ubuntu) :**
```bash
# Ajouter le repository Prometheus
sudo apt-get update
sudo apt-get install -y prometheus-mysqld-exporter

# Service systemd cr√©√© automatiquement
sudo systemctl status prometheus-mysqld-exporter
```

**Docker :**
```bash
docker pull prom/mysqld-exporter:v0.15.1

# Test rapide
docker run -d \
  -p 9104:9104 \
  -e DATA_SOURCE_NAME="exporter:password@(mariadb:3306)/" \
  prom/mysqld-exporter:v0.15.1
```

### 2. Configuration utilisateur MariaDB

**Cr√©er un utilisateur d√©di√© avec privil√®ges minimaux :**
```sql
-- Cr√©er utilisateur exporter
CREATE USER 'exporter'@'%' IDENTIFIED BY 'SecureExporterPassword123!';

-- Privil√®ges requis pour m√©triques de base
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'exporter'@'%';

-- Privil√®ges additionnels pour m√©triques avanc√©es
GRANT SLAVE MONITOR ON *.* TO 'exporter'@'%';  -- MariaDB 10.5+

FLUSH PRIVILEGES;

-- V√©rifier les privil√®ges
SHOW GRANTS FOR 'exporter'@'%';
```

**Explication des privil√®ges :**

| Privil√®ge | Utilisation |
|-----------|-------------|
| `PROCESS` | SHOW PROCESSLIST, SHOW ENGINE INNODB STATUS |
| `REPLICATION CLIENT` | SHOW MASTER STATUS, SHOW SLAVE STATUS |
| `SELECT` | Acc√®s aux tables syst√®me (information_schema, performance_schema) |
| `SLAVE MONITOR` | M√©triques de r√©plication avanc√©es (MariaDB 10.5+) |

### 3. Configuration de connexion

**M√©thode 1 : Variable d'environnement (simple) :**
```bash
export DATA_SOURCE_NAME="exporter:SecureExporterPassword123!@tcp(localhost:3306)/"

# Lancer l'exporter
mysqld_exporter
```

**M√©thode 2 : Fichier .my.cnf (recommand√© pour production) :**
```bash
# Cr√©er fichier de configuration
sudo mkdir -p /etc/mysqld_exporter
sudo tee /etc/mysqld_exporter/.my.cnf > /dev/null <<EOF
[client]
user=exporter
password=SecureExporterPassword123!
host=localhost
port=3306
EOF

# S√©curiser le fichier
sudo chmod 600 /etc/mysqld_exporter/.my.cnf
sudo chown prometheus:prometheus /etc/mysqld_exporter/.my.cnf

# Lancer avec le fichier
mysqld_exporter --config.my-cnf=/etc/mysqld_exporter/.my.cnf
```

**M√©thode 3 : Fichier .my.cnf avec section custom :**
```ini
# /etc/mysqld_exporter/.my.cnf
[client]
user=exporter
password=SecureExporterPassword123!
host=localhost
port=3306

[client.servers]
# Configuration pour plusieurs instances
# Format : server_name = DSN
primary = exporter:password@tcp(mariadb-primary:3306)/
replica1 = exporter:password@tcp(mariadb-replica-1:3306)/
replica2 = exporter:password@tcp(mariadb-replica-2:3306)/
```

### 4. Service systemd

**Cr√©er le service systemd :**
```ini
# /etc/systemd/system/mysqld_exporter.service
[Unit]
Description=Prometheus MySQL/MariaDB Exporter
Documentation=https://github.com/prometheus/mysqld_exporter
After=network.target mariadb.service

[Service]
Type=simple
User=prometheus
Group=prometheus

# Configuration
Environment="DATA_SOURCE_NAME=exporter:SecureExporterPassword123!@tcp(localhost:3306)/"

# Ou via fichier .my.cnf (recommand√©)
# ExecStart=/usr/local/bin/mysqld_exporter \
#   --config.my-cnf=/etc/mysqld_exporter/.my.cnf \
#   --web.listen-address=:9104 \
#   --web.telemetry-path=/metrics

ExecStart=/usr/local/bin/mysqld_exporter \
  --web.listen-address=:9104 \
  --web.telemetry-path=/metrics \
  --collect.global_status \
  --collect.global_variables \
  --collect.info_schema.processlist \
  --collect.info_schema.innodb_metrics \
  --collect.info_schema.tables \
  --collect.info_schema.tablestats \
  --collect.perf_schema.eventsstatements \
  --collect.perf_schema.file_events \
  --collect.slave_status

Restart=always
RestartSec=10

# S√©curit√©
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/var/log/mysqld_exporter

[Install]
WantedBy=multi-user.target
```

**Activer et d√©marrer le service :**
```bash
# Recharger systemd
sudo systemctl daemon-reload

# Activer au d√©marrage
sudo systemctl enable mysqld_exporter

# D√©marrer le service
sudo systemctl start mysqld_exporter

# V√©rifier le statut
sudo systemctl status mysqld_exporter

# Logs
sudo journalctl -u mysqld_exporter -f
```

### 5. V√©rification de l'exposition des m√©triques

```bash
# Tester l'endpoint metrics
curl http://localhost:9104/metrics

# Output attendu :
# HELP mysql_up Whether the MySQL server is up.
# TYPE mysql_up gauge
# mysql_up 1
# 
# HELP mysql_global_status_threads_connected Number of currently open connections.
# TYPE mysql_global_status_threads_connected gauge
# mysql_global_status_threads_connected 5
# 
# HELP mysql_global_status_queries Total number of queries.
# TYPE mysql_global_status_queries counter
# mysql_global_status_queries 123456
# ...

# V√©rifier une m√©trique sp√©cifique
curl -s http://localhost:9104/metrics | grep mysql_global_status_threads_running
```

---

## M√©triques principales expos√©es

### 1. M√©triques de disponibilit√©

```promql
# Instance UP/DOWN
mysql_up

# Uptime en secondes
mysql_global_status_uptime
```

### 2. M√©triques de connexions

```promql
# Connexions actives
mysql_global_status_threads_connected

# Connexions en cours d'ex√©cution
mysql_global_status_threads_running

# Connexions maximales configur√©es
mysql_global_variables_max_connections

# Connexions refus√©es (max atteint)
mysql_global_status_connection_errors_max_connections

# Taux d'utilisation des connexions (%)
(mysql_global_status_threads_connected / mysql_global_variables_max_connections) * 100
```

### 3. M√©triques de performance des requ√™tes

```promql
# Nombre total de requ√™tes
mysql_global_status_queries

# Requ√™tes SELECT
mysql_global_status_com_select

# Requ√™tes INSERT
mysql_global_status_com_insert

# Requ√™tes UPDATE
mysql_global_status_com_update

# Requ√™tes DELETE
mysql_global_status_com_delete

# QPS (Queries Per Second)
rate(mysql_global_status_queries[5m])

# Requ√™tes lentes
mysql_global_status_slow_queries

# Taux de requ√™tes lentes
rate(mysql_global_status_slow_queries[5m])
```

### 4. M√©triques InnoDB

```promql
# Buffer Pool - Utilisation m√©moire
mysql_global_status_innodb_buffer_pool_bytes_data
mysql_global_status_innodb_buffer_pool_bytes_dirty
mysql_global_status_innodb_buffer_pool_pages_total
mysql_global_status_innodb_buffer_pool_pages_free

# Buffer Pool - Efficacit√© (hit ratio)
(mysql_global_status_innodb_buffer_pool_read_requests - mysql_global_status_innodb_buffer_pool_reads) 
/ mysql_global_status_innodb_buffer_pool_read_requests * 100

# InnoDB Row Operations
mysql_global_status_innodb_rows_read
mysql_global_status_innodb_rows_inserted
mysql_global_status_innodb_rows_updated
mysql_global_status_innodb_rows_deleted

# InnoDB I/O
mysql_global_status_innodb_data_reads
mysql_global_status_innodb_data_writes
mysql_global_status_innodb_data_fsyncs

# InnoDB Log
mysql_global_status_innodb_log_waits
mysql_global_status_innodb_log_writes
```

### 5. M√©triques de r√©plication

```promql
# Statut r√©plication (1 = OK, 0 = KO)
mysql_slave_status_slave_io_running
mysql_slave_status_slave_sql_running

# Lag de r√©plication (secondes)
mysql_slave_status_seconds_behind_master

# Position binlog
mysql_slave_status_read_master_log_pos
mysql_slave_status_exec_master_log_pos

# Erreurs de r√©plication
mysql_slave_status_last_errno
```

### 6. M√©triques de tables

```promql
# Taille des tables (bytes)
mysql_info_schema_table_size{schema="myapp_production", table="users"}

# Nombre de rows
mysql_info_schema_table_rows{schema="myapp_production", table="users"}

# Fragmentation (Data_free)
mysql_info_schema_table_size_data_free{schema="myapp_production", table="users"}
```

### 7. M√©triques Performance Schema

```promql
# Temps d'ex√©cution des statements
mysql_perf_schema_events_statements_total{digest_text="SELECT * FROM users WHERE id = ?"}

# Latence par digest
mysql_perf_schema_events_statements_seconds_total{digest_text="..."}
```

---

## Collectors disponibles

mysqld_exporter expose des **collectors** (groupes de m√©triques). Certains sont activ√©s par d√©faut, d'autres doivent √™tre activ√©s explicitement.

### Collectors par d√©faut (toujours actifs)

| Collector | Description |
|-----------|-------------|
| `global_status` | SHOW GLOBAL STATUS |
| `global_variables` | SHOW GLOBAL VARIABLES |

### Collectors optionnels (√† activer)

**Activer via flags CLI :**
```bash
mysqld_exporter \
  --collect.info_schema.processlist \
  --collect.info_schema.innodb_metrics \
  --collect.info_schema.tables \
  --collect.perf_schema.eventsstatements \
  --collect.slave_status
```

**Liste compl√®te des collectors :**

| Flag | Description | Overhead |
|------|-------------|----------|
| `--collect.auto_increment.columns` | Colonnes AUTO_INCREMENT | Moyen |
| `--collect.binlog_size` | Taille des binlogs | Faible |
| `--collect.engine_innodb_status` | SHOW ENGINE INNODB STATUS | √âlev√© |
| `--collect.engine_tokudb_status` | TokuDB status (si pr√©sent) | Moyen |
| `--collect.global_status` | ‚úÖ SHOW GLOBAL STATUS | Faible |
| `--collect.global_variables` | ‚úÖ SHOW GLOBAL VARIABLES | Faible |
| `--collect.info_schema.clientstats` | Client statistics | Moyen |
| `--collect.info_schema.innodb_metrics` | InnoDB metrics | Moyen |
| `--collect.info_schema.innodb_tablespaces` | InnoDB tablespaces | Moyen |
| `--collect.info_schema.processlist` | SHOW PROCESSLIST | √âlev√© |
| `--collect.info_schema.query_response_time` | Query response time | Moyen |
| `--collect.info_schema.tables` | Tables metadata | √âlev√© |
| `--collect.info_schema.tablestats` | Table statistics | √âlev√© |
| `--collect.info_schema.userstats` | User statistics | Moyen |
| `--collect.perf_schema.eventsstatements` | Performance Schema statements | √âlev√© |
| `--collect.perf_schema.eventsstatementssum` | PS statements summary | Moyen |
| `--collect.perf_schema.eventswaits` | PS wait events | Tr√®s √©lev√© |
| `--collect.perf_schema.file_events` | PS file events | Moyen |
| `--collect.perf_schema.file_instances` | PS file instances | Moyen |
| `--collect.perf_schema.indexiowaits` | PS index I/O waits | Moyen |
| `--collect.perf_schema.tableiowaits` | PS table I/O waits | Moyen |
| `--collect.perf_schema.tablelocks` | PS table locks | Moyen |
| `--collect.slave_hosts` | SHOW SLAVE HOSTS | Faible |
| `--collect.slave_status` | SHOW SLAVE STATUS | Faible |

üí° **Conseil** : Activez uniquement les collectors n√©cessaires pour r√©duire l'overhead. En production, privil√©giez :
- `global_status`, `global_variables` (d√©faut)
- `info_schema.innodb_metrics`
- `slave_status` (si r√©plication)
- `info_schema.tables` (si besoin m√©triques par table)

‚ö†Ô∏è **Attention** : Les collectors avec overhead "√âlev√©" ou "Tr√®s √©lev√©" peuvent impacter les performances sur des instances tr√®s charg√©es. Testez avant d'activer en production.

---

## Custom collectors (m√©triques personnalis√©es)

### 1. Configuration de custom queries

Cr√©er un fichier de custom queries pour collecter des m√©triques sp√©cifiques non expos√©es par d√©faut.

**custom-queries.yml :**
```yaml
# Custom queries pour mysqld_exporter
# Format : https://github.com/prometheus/mysqld_exporter#custom-queries

# M√©trique : Nombre d'utilisateurs actifs
- query: "SELECT COUNT(*) as count FROM users WHERE is_active = TRUE"
  metrics:
    - count:
        usage: "GAUGE"
        description: "Number of active users"

# M√©trique : Taille totale par base de donn√©es
- query: |
    SELECT 
      schema_name,
      SUM(data_length + index_length) as size_bytes
    FROM information_schema.TABLES
    GROUP BY schema_name
  metrics:
    - schema_name:
        usage: "LABEL"
        description: "Database schema name"
    - size_bytes:
        usage: "GAUGE"
        description: "Total size of database in bytes"

# M√©trique : Nombre de connexions par user
- query: |
    SELECT 
      user,
      COUNT(*) as connection_count
    FROM information_schema.PROCESSLIST
    GROUP BY user
  metrics:
    - user:
        usage: "LABEL"
        description: "Database user"
    - connection_count:
        usage: "GAUGE"
        description: "Number of active connections per user"

# M√©trique : √Çge du binlog le plus ancien
- query: |
    SELECT 
      TIMESTAMPDIFF(SECOND, 
        (SELECT MIN(FROM_UNIXTIME(created)) FROM mysql.general_log), 
        NOW()
      ) as oldest_binlog_age_seconds
  metrics:
    - oldest_binlog_age_seconds:
        usage: "GAUGE"
        description: "Age of oldest binary log in seconds"

# M√©trique : Tables fragment√©es (Data_free > 100MB)
- query: |
    SELECT 
      table_schema,
      table_name,
      data_free
    FROM information_schema.TABLES
    WHERE data_free > 104857600
  metrics:
    - table_schema:
        usage: "LABEL"
        description: "Schema name"
    - table_name:
        usage: "LABEL"
        description: "Table name"
    - data_free:
        usage: "GAUGE"
        description: "Fragmentation (data_free) in bytes"

# M√©trique : Long-running queries (> 60s)
- query: |
    SELECT 
      user,
      db,
      COUNT(*) as long_query_count
    FROM information_schema.PROCESSLIST
    WHERE command != 'Sleep' AND time > 60
    GROUP BY user, db
  metrics:
    - user:
        usage: "LABEL"
        description: "Database user"
    - db:
        usage: "LABEL"
        description: "Database name"
    - long_query_count:
        usage: "GAUGE"
        description: "Number of long-running queries (>60s)"
```

**Lancer mysqld_exporter avec custom queries :**
```bash
mysqld_exporter \
  --config.my-cnf=/etc/mysqld_exporter/.my.cnf \
  --collect.custom_query.hr \
  --collect.custom_query.hr.directory=/etc/mysqld_exporter/custom-queries.yml
```

### 2. Exemple de m√©triques custom avanc√©es

**Monitoring des deadlocks :**
```yaml
- query: |
    SELECT 
      COUNT(*) as deadlock_count
    FROM information_schema.INNODB_METRICS
    WHERE name = 'lock_deadlocks'
  metrics:
    - deadlock_count:
        usage: "COUNTER"
        description: "Total number of deadlocks"
```

**Monitoring de la fragmentation par base :**
```yaml
- query: |
    SELECT 
      table_schema,
      ROUND(SUM(data_free) / SUM(data_length + index_length) * 100, 2) as fragmentation_percent
    FROM information_schema.TABLES
    WHERE table_schema NOT IN ('information_schema', 'performance_schema', 'mysql', 'sys')
    GROUP BY table_schema
  metrics:
    - table_schema:
        usage: "LABEL"
    - fragmentation_percent:
        usage: "GAUGE"
        description: "Table fragmentation percentage"
```

---

## D√©ploiement dans Kubernetes

### 1. Deployment basique

**mysqld-exporter-deployment.yaml :**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysqld-exporter
  namespace: production
  labels:
    app: mysqld-exporter
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysqld-exporter
  template:
    metadata:
      labels:
        app: mysqld-exporter
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "9104"
        prometheus.io/path: "/metrics"
    spec:
      containers:
      - name: mysqld-exporter
        image: prom/mysqld-exporter:v0.15.1
        ports:
        - name: metrics
          containerPort: 9104
          protocol: TCP
        
        env:
        - name: DATA_SOURCE_NAME
          valueFrom:
            secretKeyRef:
              name: mysqld-exporter-secret
              key: data-source-name
        
        # Collectors activ√©s
        args:
        - --collect.info_schema.innodb_metrics
        - --collect.info_schema.tables
        - --collect.slave_status
        - --collect.perf_schema.eventsstatements
        - --web.listen-address=:9104
        - --web.telemetry-path=/metrics
        
        livenessProbe:
          httpGet:
            path: /
            port: 9104
          initialDelaySeconds: 30
          periodSeconds: 10
        
        readinessProbe:
          httpGet:
            path: /
            port: 9104
          initialDelaySeconds: 10
          periodSeconds: 5
        
        resources:
          requests:
            cpu: "100m"
            memory: "128Mi"
          limits:
            cpu: "200m"
            memory: "256Mi"

---
apiVersion: v1
kind: Service
metadata:
  name: mysqld-exporter
  namespace: production
  labels:
    app: mysqld-exporter
spec:
  selector:
    app: mysqld-exporter
  ports:
  - name: metrics
    port: 9104
    targetPort: 9104
    protocol: TCP
  type: ClusterIP

---
apiVersion: v1
kind: Secret
metadata:
  name: mysqld-exporter-secret
  namespace: production
type: Opaque
stringData:
  data-source-name: "exporter:SecureExporterPassword123!@tcp(mariadb-primary-svc:3306)/"
```

### 2. DaemonSet pour monitoring de chaque replica

**mysqld-exporter-daemonset.yaml :**
```yaml
apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: mysqld-exporter
  namespace: production
spec:
  selector:
    matchLabels:
      app: mysqld-exporter
  template:
    metadata:
      labels:
        app: mysqld-exporter
    spec:
      # S√©lection des n≈ìuds avec label database=true
      nodeSelector:
        database: "true"
      
      containers:
      - name: mysqld-exporter
        image: prom/mysqld-exporter:v0.15.1
        ports:
        - name: metrics
          containerPort: 9104
        
        env:
        # Connexion √† MariaDB sur le m√™me n≈ìud (localhost)
        - name: DATA_SOURCE_NAME
          value: "exporter:password@tcp(localhost:3306)/"
        
        args:
        - --collect.info_schema.innodb_metrics
        - --collect.slave_status
        
        resources:
          requests:
            cpu: "50m"
            memory: "64Mi"
          limits:
            cpu: "100m"
            memory: "128Mi"
```

### 3. ServiceMonitor pour Prometheus Operator

**mysqld-exporter-servicemonitor.yaml :**
```yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: mysqld-exporter
  namespace: production
  labels:
    app: mysqld-exporter
    prometheus: kube-prometheus
spec:
  # S√©lectionner le service mysqld-exporter
  selector:
    matchLabels:
      app: mysqld-exporter
  
  # Namespace √† surveiller
  namespaceSelector:
    matchNames:
    - production
  
  # Endpoints √† scraper
  endpoints:
  - port: metrics
    interval: 30s
    scrapeTimeout: 10s
    path: /metrics
    
    # Relabeling pour ajouter des labels custom
    relabelings:
    - sourceLabels: [__meta_kubernetes_pod_name]
      targetLabel: pod
    - sourceLabels: [__meta_kubernetes_pod_node_name]
      targetLabel: node
    - sourceLabels: [__meta_kubernetes_namespace]
      targetLabel: namespace
    
    # Metric relabeling
    metricRelabelings:
    # Supprimer les m√©triques non utilis√©es
    - sourceLabels: [__name__]
      regex: 'mysql_global_variables_.*'
      action: drop
    # Ajouter un label instance personnalis√©
    - sourceLabels: [pod]
      targetLabel: instance
      replacement: 'mariadb-${1}'
```

### 4. PodMonitor pour monitoring des pods MariaDB directement

**mariadb-podmonitor.yaml :**
```yaml
apiVersion: monitoring.coreos.com/v1
kind: PodMonitor
metadata:
  name: mariadb-pods
  namespace: production
spec:
  # S√©lectionner tous les pods MariaDB
  selector:
    matchLabels:
      app.kubernetes.io/name: mariadb
  
  # Scrape le sidecar mysqld_exporter
  podMetricsEndpoints:
  - port: metrics
    interval: 30s
    path: /metrics
    
    relabelings:
    - sourceLabels: [__meta_kubernetes_pod_label_app_kubernetes_io_instance]
      targetLabel: mariadb_instance
    - sourceLabels: [__meta_kubernetes_pod_label_statefulset_kubernetes_io_pod_name]
      targetLabel: pod_name
```

### 5. Sidecar pattern (exporter dans le m√™me pod MariaDB)

**mariadb-statefulset-with-exporter.yaml :**
```yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: mariadb
  namespace: production
spec:
  serviceName: mariadb
  replicas: 3
  selector:
    matchLabels:
      app: mariadb
  template:
    metadata:
      labels:
        app: mariadb
    spec:
      containers:
      # Container MariaDB principal
      - name: mariadb
        image: mariadb:11.8.2
        ports:
        - name: mysql
          containerPort: 3306
        env:
        - name: MARIADB_ROOT_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mariadb-root
              key: password
        volumeMounts:
        - name: data
          mountPath: /var/lib/mysql
      
      # Sidecar mysqld_exporter
      - name: mysqld-exporter
        image: prom/mysqld-exporter:v0.15.1
        ports:
        - name: metrics
          containerPort: 9104
        env:
        # Connexion √† MariaDB via localhost (m√™me pod)
        - name: DATA_SOURCE_NAME
          value: "exporter:password@tcp(localhost:3306)/"
        args:
        - --collect.info_schema.innodb_metrics
        - --collect.slave_status
        - --web.listen-address=:9104
        resources:
          requests:
            cpu: "50m"
            memory: "64Mi"
          limits:
            cpu: "100m"
            memory: "128Mi"
  
  volumeClaimTemplates:
  - metadata:
      name: data
    spec:
      accessModes: ["ReadWriteOnce"]
      storageClassName: fast-ssd
      resources:
        requests:
          storage: 100Gi
```

---

## Int√©gration Prometheus

### 1. Configuration Prometheus (scrape config)

**prometheus.yml :**
```yaml
global:
  scrape_interval: 30s
  evaluation_interval: 30s

scrape_configs:
  # Job pour mysqld_exporter
  - job_name: 'mariadb'
    static_configs:
    - targets:
      - 'mysqld-exporter.production.svc.cluster.local:9104'
      labels:
        instance: 'mariadb-primary'
        env: 'production'
    
    # Relabeling
    relabel_configs:
    - source_labels: [__address__]
      target_label: __param_target
    - source_labels: [__param_target]
      target_label: instance
    - target_label: __address__
      replacement: 'mysqld-exporter.production.svc.cluster.local:9104'
    
    # Scrape timeout
    scrape_timeout: 10s
    
    # M√©thode HTTP
    scheme: http
```

### 2. Prometheus Operator (preferred)

Avec Prometheus Operator, utilisez directement **ServiceMonitor** ou **PodMonitor** (voir section Kubernetes ci-dessus).

### 3. Service Discovery Kubernetes

**D√©couverte automatique des exporters :**
```yaml
scrape_configs:
  - job_name: 'kubernetes-pods'
    kubernetes_sd_configs:
    - role: pod
      namespaces:
        names:
        - production
    
    relabel_configs:
    # Scraper uniquement les pods avec annotation prometheus.io/scrape=true
    - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
      action: keep
      regex: true
    
    # Utiliser le port annot√©
    - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_port]
      action: replace
      target_label: __address__
      regex: (.+)
      replacement: ${1}:9104
    
    # Utiliser le path annot√©
    - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
      action: replace
      target_label: __metrics_path__
      regex: (.+)
```

---

## Requ√™tes PromQL avanc√©es

### 1. Calculs de performance

**QPS (Queries Per Second) :**
```promql
# QPS instantan√©
rate(mysql_global_status_queries[1m])

# QPS par instance
sum by (instance) (rate(mysql_global_status_queries[5m]))

# QPS total cluster
sum(rate(mysql_global_status_queries[5m]))
```

**TPS (Transactions Per Second) :**
```promql
rate(mysql_global_status_com_commit[1m]) + rate(mysql_global_status_com_rollback[1m])
```

**Read/Write ratio :**
```promql
# Ratio reads/writes
rate(mysql_global_status_com_select[5m]) / 
(rate(mysql_global_status_com_insert[5m]) + 
 rate(mysql_global_status_com_update[5m]) + 
 rate(mysql_global_status_com_delete[5m]))
```

### 2. Analyse des connexions

**Taux d'utilisation des connexions :**
```promql
(mysql_global_status_threads_connected / mysql_global_variables_max_connections) * 100
```

**Connexions refus√©es :**
```promql
rate(mysql_global_status_connection_errors_max_connections[5m])
```

**Threads en attente :**
```promql
mysql_global_status_threads_running > 50
```

### 3. Performance InnoDB

**Buffer Pool Hit Ratio (doit √™tre > 99%) :**
```promql
(mysql_global_status_innodb_buffer_pool_read_requests - mysql_global_status_innodb_buffer_pool_reads) 
/ mysql_global_status_innodb_buffer_pool_read_requests * 100
```

**Buffer Pool utilization :**
```promql
(mysql_global_status_innodb_buffer_pool_pages_total - mysql_global_status_innodb_buffer_pool_pages_free) 
/ mysql_global_status_innodb_buffer_pool_pages_total * 100
```

**InnoDB Row Lock Waits (contentions) :**
```promql
rate(mysql_global_status_innodb_row_lock_waits[5m])
```

**InnoDB Row Lock Time moyen :**
```promql
rate(mysql_global_status_innodb_row_lock_time[5m]) 
/ rate(mysql_global_status_innodb_row_lock_waits[5m])
```

### 4. Monitoring de la r√©plication

**Lag de r√©plication :**
```promql
mysql_slave_status_seconds_behind_master
```

**R√©plication en erreur :**
```promql
mysql_slave_status_slave_io_running == 0 or mysql_slave_status_slave_sql_running == 0
```

**Alerte si lag > 60 secondes :**
```promql
mysql_slave_status_seconds_behind_master > 60
```

### 5. Analyse des tables

**Top 10 tables par taille :**
```promql
topk(10, mysql_info_schema_table_size)
```

**Tables avec le plus de fragmentation :**
```promql
topk(10, mysql_info_schema_table_size_data_free)
```

**Croissance des tables (bytes/sec) :**
```promql
rate(mysql_info_schema_table_size[1h])
```

### 6. Requ√™tes lentes

**Taux de slow queries :**
```promql
rate(mysql_global_status_slow_queries[5m])
```

**Pourcentage de slow queries :**
```promql
(rate(mysql_global_status_slow_queries[5m]) / rate(mysql_global_status_queries[5m])) * 100
```

---

## Best practices de production

### 1. **S√©curiser les credentials**

```bash
# Ne JAMAIS exposer le mot de passe en clair
‚ùå mysqld_exporter --data-source-name="root:password@tcp(localhost:3306)/"

# Utiliser un fichier .my.cnf s√©curis√©
‚úÖ mysqld_exporter --config.my-cnf=/etc/mysqld_exporter/.my.cnf

# Ou Kubernetes Secret
‚úÖ env:
    - name: DATA_SOURCE_NAME
      valueFrom:
        secretKeyRef:
          name: mysqld-exporter-secret
          key: data-source-name
```

### 2. **Privil√®ges minimaux**

```sql
-- Utiliser un utilisateur d√©di√© avec privil√®ges minimaux
CREATE USER 'exporter'@'%' IDENTIFIED BY 'password';
GRANT PROCESS, REPLICATION CLIENT, SELECT ON *.* TO 'exporter'@'%';

-- Pas de GRANT ALL, pas de privil√®ges d'√©criture
```

### 3. **Scrape interval optimis√©**

```yaml
# 30 secondes = bon compromis
scrape_interval: 30s

# Trop fr√©quent (overhead)
‚ùå scrape_interval: 5s

# Trop long (perte de granularit√©)
‚ùå scrape_interval: 5m
```

### 4. **Activer seulement les collectors n√©cessaires**

```bash
# Production basique
mysqld_exporter \
  --collect.info_schema.innodb_metrics \
  --collect.slave_status

# √âviter les collectors avec overhead √©lev√©
‚ùå --collect.perf_schema.eventswaits
‚ùå --collect.info_schema.processlist (si DB tr√®s active)
```

### 5. **Timeout appropri√©**

```yaml
scrape_configs:
  - job_name: 'mariadb'
    scrape_timeout: 10s  # Doit √™tre < scrape_interval
```

### 6. **High availability : plusieurs exporters**

```yaml
# Exporter sur chaque instance pour redondance
- targets:
  - mariadb-primary-exporter:9104
  - mariadb-replica-1-exporter:9104
  - mariadb-replica-2-exporter:9104
```

### 7. **Relabeling pour organisation**

```yaml
relabel_configs:
- source_labels: [__address__]
  target_label: instance
- source_labels: [__meta_kubernetes_pod_label_role]
  target_label: mariadb_role  # primary/replica
```

---

## Troubleshooting

### Probl√®me 1 : mysqld_exporter ne d√©marre pas

**Sympt√¥mes :**
```
Error creating exporter: Error 1045: Access denied for user 'exporter'@'localhost'
```

**Solutions :**

1. **V√©rifier les credentials :**
```bash
# Tester la connexion manuellement
mariadb -h localhost -u exporter -p
```

2. **V√©rifier les privil√®ges :**
```sql
SHOW GRANTS FOR 'exporter'@'%';
-- Doit avoir au minimum : PROCESS, REPLICATION CLIENT, SELECT
```

3. **V√©rifier le DSN :**
```bash
# Format correct
exporter:password@tcp(host:port)/

# V√©rifier caract√®res sp√©ciaux dans le mot de passe
# Si password contient @, %, etc., encoder en URL
```

### Probl√®me 2 : Certaines m√©triques manquantes

**Diagnostic :**
```bash
# V√©rifier les collectors actifs
curl -s http://localhost:9104/metrics | grep "^# HELP" | wc -l

# Comparer avec collectors activ√©s
mysqld_exporter --help | grep collect
```

**Solution :**
```bash
# Activer les collectors manquants
mysqld_exporter \
  --collect.info_schema.innodb_metrics \
  --collect.slave_status \
  ...
```

### Probl√®me 3 : High CPU usage de mysqld_exporter

**Cause :** Collectors trop lourds activ√©s.

**Solution :**
```bash
# D√©sactiver collectors lourds
mysqld_exporter \
  --no-collect.info_schema.processlist \
  --no-collect.perf_schema.eventswaits \
  --no-collect.info_schema.tables
```

### Probl√®me 4 : M√©triques obsol√®tes (staleness)

**Cause :** MariaDB down, mais Prometheus affiche encore des valeurs.

**Solution :**
```promql
# V√©rifier mysql_up
mysql_up == 0

# Alerte si down > 1 minute
mysql_up == 0 for 1m
```

---

## ‚úÖ Points cl√©s √† retenir

- **mysqld_exporter** : Exporteur officiel Prometheus pour MySQL/MariaDB, l√©ger et production-ready
- **Privil√®ges minimaux** : PROCESS, REPLICATION CLIENT, SELECT suffisent pour 95% des m√©triques
- **Collectors s√©lectifs** : Activer uniquement les collectors n√©cessaires pour r√©duire l'overhead
- **Scrape interval** : 30 secondes = bon compromis entre granularit√© et charge
- **Sidecar pattern** : D√©ployer mysqld_exporter comme sidecar dans le pod MariaDB pour monitoring local
- **ServiceMonitor** : Utiliser Prometheus Operator pour d√©couverte automatique
- **Custom queries** : √âtendre les m√©triques avec des requ√™tes SQL personnalis√©es
- **PromQL avanc√©** : QPS, TPS, Buffer Pool Hit Ratio, Replication Lag essentiels
- **S√©curit√©** : Fichier .my.cnf avec permissions 600, jamais de credentials en clair
- **High availability** : Exporter sur chaque instance pour redondance
- **M√©triques cl√©s** : mysql_up, threads_connected, queries rate, innodb_buffer_pool, slave_status

---

## üîó Ressources et r√©f√©rences

### Documentation officielle
- **[mysqld_exporter GitHub](https://github.com/prometheus/mysqld_exporter)** - Repository officiel
- **[Prometheus Documentation](https://prometheus.io/docs/)** - Documentation Prometheus
- **[PromQL Basics](https://prometheus.io/docs/prometheus/latest/querying/basics/)** - Langage de requ√™tes

### Articles techniques
- **[Monitoring MySQL with Prometheus](https://www.percona.com/blog/monitoring-mysql-with-prometheus/)** - Blog Percona
- **[mysqld_exporter Best Practices](https://github.com/prometheus/mysqld_exporter/blob/main/README.md)** - Best practices officielles

### Dashboards Grafana
- **[MySQL Overview](https://grafana.com/grafana/dashboards/7362)** - Dashboard communautaire
- **[Percona MySQL Dashboard](https://grafana.com/grafana/dashboards/7371)** - Dashboard Percona

### Outils compl√©mentaires
- **[Prometheus Operator](https://github.com/prometheus-operator/prometheus-operator)** - Operator Kubernetes
- **[Thanos](https://thanos.io/)** - Long-term storage pour Prometheus

---

## ‚û°Ô∏è Section suivante

**16.9.2 Dashboards Grafana** : Cr√©ation de dashboards Grafana avanc√©s pour MariaDB avec panels de m√©triques cl√©s, requ√™tes PromQL optimis√©es, alerting visuel, et templates multi-instances.

‚è≠Ô∏è [Dashboards Grafana](/16-devops-automatisation/09.2-dashboards-grafana.md)
